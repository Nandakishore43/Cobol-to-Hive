{"name":"Small Steps to BIG Success","tagline":"Serde for Cobol Layout to Hive table","body":"### Use Case:\r\nCurrently, there are multiple banking and insurance industries who are trying to implement their business models on hadoop \r\n\r\ntechnologies. \r\nMain issue they are facing is to convert the existing mainframe file layouts to hadoop file layout. This is extremely painful process \r\n\r\nas there multiple complications in conversion.\r\n\r\n### Pain-Areas:\r\nBelow are some of the list:\r\n1. EBCDIC format to ASCII conversion\r\n2. Field separations are based on offset instead of separators. \r\n3. array <structures> is determined run time using to previous fields (For Eg: WS-FIELD OCCURS 1 TO 50 TIMES DEPENDING ON WS-FIELD-\r\n\r\nLENGTH. )\r\n4. REDEFINES of particular previous fields.\r\n5. ...\r\n\r\n### Current work arounds:\r\nMost of the industries are adding additional layers in between mainframe and hadoop to convert the formats. And some are converting \r\n\r\nmainframes files to desired formats in mainframe systems and then transferring. Tools like SYNCSORT DMX-h are also being used.\r\n\r\n### My Approach\r\nDevelop a custom Serde which exhibits below properties:<br>\r\n1. Cobol Layout is supplied through TBL PROPERTIES similar to AvroSerde and it will build the hive table definition automatically.<br>\r\n2. Deserailzer should be able to extract the field data based on the offset at runtime.<br>\r\n3. EBCDIC to ASCII to conversion is enabled through a property in TBLPROPERTIES<br>\r\n4. ....<br>\r\n\r\n### Benefits:\r\n1. Easier migration from mainframe systems to hadoop<br>\r\n2. Removal of additional layers.<br>\r\n3. Faster processing time.<br>\r\n4. ....<br>\r\n\r\n### Example:\r\nMainframe Input File\r\n```\r\nRam Manohar  6123123123123123123king\r\nheheh        5012012012012012comment\r\nLipi         3001001001darling\r\nKanu         2006006loving\r\n```\r\nCobol Layout:\r\n```\r\n01 WS-VAR. \r\n   05 WS-NAME PIC X(12). \r\n   05 WS-MARKS-LENGTH PIC 9(2). \r\n   05 WS-marks OCCURS 0 to 25 TIMES DEPENDING ON WS-MARKS-LENGTH. \r\n      10 WS-MARK PIC 999. \r\n   05 WS-NICKNAME PIC X(6)\r\n```\r\nHive DDL:\r\n```\r\nCREATE TABLE Cobol2Hive\r\nROW FORMAT SERDE 'com.savy3.cobolserde.CobolSerde' \r\nLOCATION '/home/hduser/hive/warehouse/ram.db/lolol'\r\nTBLPROPERTIES ('cobol.layout'='01 WS-VAR. 05 WS-NAME PIC X(12). 05 WS-MARKS-LENGTH PIC 9(2). 05 WS-marks OCCURS 0 to 6 TIMES DEPENDING \r\n\r\nON WS-MARKS-LENGTH. 10 WS-MARK PIC 999. 05 WS-NICKNAME PIC X(6)');\r\n```\r\nOutput:\r\n```\r\nselect * from Cobol2Hive;\r\nOK\r\nws_name       ws_marks_length ws_mark ws_mark_1 ws_mark_2 ws_mark_3 ws_mark_4 ws_mark_5 ws_nickname \r\nRam Manohar \t6               123     123       123       123       123       123   \t  king\r\nheheh       \t5               12      12        12        12        12        null      comment\r\nLipi        \t3               1       1         1         null      null      null      darling\r\nKanu        \t2               6       6         null      null      null      null    \tloving\r\n```\r\n\r\n### Comments\r\nWant to leave a comment? Visit <a href=\"https://github.com/izuzak/izuzak.github.com/issues/{{page.commentIssueId}}\"> this post's issue \r\n\r\npage on GitHub</a> (you'll need a GitHub account. What? Like you already don't have one?!).\r\n\r\n### Authors and Contributors\r\nAuthor: <a href=\"https://github.com/rbheemana\" class=\"user-mention\">@rbheemana</a> </p>\r\n      <div class=\"owner\">\r\n      <p><a href=\"https://github.com/rbheemana\" class=\"avatar\"><img src=\"https://avatars1.githubusercontent.com/u/12659735?v=3&amp;s=60\" width=\"48\" height=\"48\"></a> <a href=\"https://github.com/rbheemana\">rbheemana</a> maintains <a href=\"https://github.com/rbheemana/Cobol-to-Hive\">Cobol-to-hive</a>","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}