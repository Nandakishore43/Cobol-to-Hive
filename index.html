<!DOCTYPE html>
<html>
  
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
  
  <script type="text/javascript">
    function loadComments(data) {
     // ...
    }
  
    $.ajax("https://api.github.com/repos/izuzak/izuzak.github.com/issues/12/comments", {
      headers: {Accept: "application/vnd.github.full+json"},
     success: function(msg){
       loadComments(msg);
    }
   });
   </script>
 <script type="text/javascript" src="http://datejs.googlecode.com/svn/trunk/build/date-en-US.js"></script>
  
  <script type="text/javascript">
  
    function loadComments(data) {
      for (var i=0; i<data.length; i++) {
        var cuser = data[i].user.login;
        var cuserlink = "https://www.github.com/" + data[i].user.login;
        var clink = "https://github.com/izuzak/izuzak.github.com/issues/12#issuecomment-" + data[i].url.substring(data[i].url.lastIndexOf("/")+1);
       var cbody = data[i].body_html;
       var cavatarlink = data[i].user.avatar_url;
       var cdate = Date.parse(data[i].created_at).toString("yyyy-MM-dd HH:mm:ss");
 
       $("#comments").append("<div class='comment'><div class='commentheader'><div class='commentgravatar'>" + '<img src="' + cavatarlink + '" alt="" width="20" height="20">' + "</div><a class='commentuser' href=\""+ cuserlink + "\">" + cuser + "</a><a class='commentdate' href=\"" + clink + "\">" + cdate + "</a></div><div class='commentbody'>" + cbody + "</div></div>");
     }
   }
 </script>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Cobol-to-hive by rbheemana</title>
  </head>

   <body>
    <header>
      <div class="inner">
        <h1>Cobol-to-hive</h1>
        <h2>Serde for Cobol Layout to Hive table</h2>
        <a href="https://github.com/rbheemana/Cobol-to-Hive" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>
    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h3>
          <a id="UseCase" class="anchor" href="#welcome-to-github-pages" aria-hidden="true"><span class="octicon octicon-link"></span></a>Use Case:</h3>

          <p>Currently, there are multiple banking and insurance industries who are trying to implement their business models on hadoop technologies. 
Main issue they are facing is to convert the existing mainframe file layouts to hadoop file layout. This is extremely painful process as there multiple complications in conversion.</p>

          <h3>
          <a id="PainAreas" class="anchor" href="#designer-templates" aria-hidden="true"><span class="octicon octicon-link"></span></a>Pain-Areas:</h3>

          <p>Below are some of the list:<br>
1. EBCDIC format to ASCII conversion<br>
2. Field separations are based on offset instead of separators. <br>
3. array <structures> is determined run time using to previous fields (For Eg: WS-FIELD OCCURS 1 TO 50 TIMES DEPENDING ON WS-FIELD-LENGTH. )<br>
4. REDEFINES of particular previous fields.<br>
5. ...
</p>

          <h3>
<a id="work-around" class="anchor" href="#work-around" aria-hidden="true"><span class="octicon octicon-link"></span></a>Current work arounds:</h3>

<p>Most of the industries are adding additional layers in between mainframe and hadoop to convert the formats. And some are converting mainframes files to desired formats in mainframe systems and then transferring. Tools like SYNCSORT DMX-h are also being used.</p>
<h3>
<a id="proposed-solution" class="anchor" href="#proposed-dolution" aria-hidden="true"><span class="octicon octicon-link"></span></a>Current work arounds:</h3>

<p>Develop a custom Serde which exhibits below properties:<br>
1. Cobol Layout is supplied through TBL PROPERTIES similar to AvroSerde and it will build the hive table definition automatically.<br>
2. Deserailzer should be able to extract the field data based on the offset at runtime.<br>
3. EBCDIC to ASCII to conversion is enabled through a property in TBLPROPERTIES<br>
4. ....<br></p>

<h3>
<a id="benefits" class="anchor" href="#benefits" aria-hidden="true"><span class="octicon octicon-link"></span></a>Benefits:</h3>

<p>1. Easier migration from mainframe systems to hadoop<br>
2. Removal of additional layers.<br>
3. Faster processing time.<br>
4. ....<br></p>

<h3>
<a id="example" class="anchor" href="#example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example:</h3>
<b>Input Mainframe file:</b><br>
<pre>
Ram Manohar  6123123123123123123king
heheh        5012012012012012comment
Lipi         3001001001darling
Kanu         2006006loving
</pre>
<br><b>Cobol Layout:</b><br>
<pre>
01 WS-VAR. 
   05 WS-NAME PIC X(12). 
   05 WS-MARKS-LENGTH PIC 9(2). 
   05 WS-marks OCCURS 0 to 25 TIMES DEPENDING ON WS-MARKS-LENGTH. 
      10 WS-MARK PIC 999. 
   05 WS-NICKNAME PIC X(6)
</pre>
<br><b>Hive DDL:</b><br>
<pre>
CREATE TABLE Cobol2Hive
ROW FORMAT SERDE 'com.savy3.cobolserde.CobolSerde' 
LOCATION '/home/hduser/hive/warehouse/ram.db/lolol'
TBLPROPERTIES ('cobol.layout'='01 WS-VAR. 05 WS-NAME PIC X(12). 05 WS-MARKS-LENGTH PIC 9(2). 05 WS-marks OCCURS 0 to 6 TIMES DEPENDING ON WS-MARKS-LENGTH. 10 WS-MARK PIC 999. 05 WS-NICKNAME PIC X(6)');
</pre>
<br><b>Outptut:</b><br>
<pre>
select * from Cobol2Hive;
OK
ws_name       ws_marks_length ws_mark ws_mark_1 ws_mark_2 ws_mark_3 ws_mark_4 ws_mark_5 ws_nickname 
Ram Manohar 	6               123     123       123       123       123       123   	  king
heheh       	5               12      12        12        12        12        null      comment
Lipi        	3               1       1         1         null      null      null      darling
Kanu        	2               6       6         null      null      null      null    	loving
</pre>

  </div>
  <div class="current-section">
    <a href="#top">Scroll to top</a>
    <a href="https://github.com/rbheemana/Cobol-to-Hive/tarball/master" class="tar">tar</a><a href="https://github.com/rbheemana/Cobol-to-Hive/zipball/master" class="zip">zip</a><a href="" class="code">source code</a>
    <p class="name"></p>
  </div>
 <div id="comments">
   <h2>Comments</h2>
   <div id="header">
     Want to leave a comment? Visit <a href="https://github.com/izuzak/izuzak.github.com/issues/{{page.commentIssueId}}"> this post's issue page on GitHub</a> (you'll need a GitHub account. What? Like you already don't have one?!).
   </div>
 </div>
          </section>

        <aside id="sidebar">
          <a href="https://github.com/rbheemana/Cobol-to-Hive/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/rbheemana/Cobol-to-Hive/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/rbheemana/Cobol-to-Hive"></a> is maintained by <a href="https://github.com/rbheemana">rbheemana</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>
    <h3>
<a id="authors-and-contributors" class="anchor" href="#authors-and-contributors" aria-hidden="true"><span class="octicon octicon-link"></span></a>Authors and Contributors</h3>

<p>Author: <a href="https://github.com/rbheemana" class="user-mention">@rbheemana</a> </p>
    <footer>
      <div class="owner">
      <p><a href="https://github.com/rbheemana" class="avatar"><img src="https://avatars1.githubusercontent.com/u/12659735?v=3&amp;s=60" width="48" height="48"></a> <a href="https://github.com/rbheemana">rbheemana</a> maintains <a href="https://github.com/rbheemana/Cobol-to-Hive">Cobol-to-hive</a></p>


      </div>
      <div class="creds">
        <small>This page generated using <a href="https://pages.github.com/">GitHub Pages</a><br>theme by <a href="https://twitter.com/jonrohan/">Jon Rohan</a></small>
      </div>
    </footer>
  </body>
</html>
